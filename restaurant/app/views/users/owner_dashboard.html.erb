<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Restaurant Management System</title>
    <script src="/js/admin/index.js"></script>
    <link rel="stylesheet" href="/customer_dashboard.css">
    <style>
        #menuToggle
        {
          display: block;
          position: relative;
          top: 50px;
          left: 50px; 
          z-index: 1;
          -webkit-user-select: none;
          user-select: none;
        }
        #menuToggle a
        {
          text-decoration: none;
          color: #232323;
          transition: color 0.3s ease;
        }
        #menuToggle a:hover
        {
          color: tomato;
        }
        #menuToggle input
        {
          display: block;
          width: 40px;
          height: 32px;
          position: absolute;
          top: -7px;
          left: -5px; 
          cursor: pointer;
          opacity: 0; 
          z-index: 2; 
          -webkit-touch-callout: none;
        }
        #menuToggle span
        {
          display: block;
          width: 33px;
          height: 4px;
          margin-bottom: 5px;
          position: relative;          
          background: #cdcdcd;
          border-radius: 3px;
          z-index: 1;          
          transform-origin: 4px 0px;
          transition: transform 0.5s cubic-bezier(0.77,0.2,0.05,1.0),
                      background 0.5s cubic-bezier(0.77,0.2,0.05,1.0),
                      opacity 0.55s ease;
        }
        #menuToggle span:first-child
        {
          transform-origin: 0% 0%;
        }
        #menuToggle span:nth-last-child(2)
        {
          transform-origin: 0% 100%;
        }
        #menuToggle input:checked ~ span
        {
          opacity: 1;
          transform: rotate(45deg) translate(-2px, -1px);
          background: #232323;
        }

        #menuToggle input:checked ~ span:nth-last-child(3)
        {
          opacity: 0;
          transform: rotate(0deg) scale(0.2, 0.2);
        }
        #menuToggle input:checked ~ span:nth-last-child(2)
        {
          transform: rotate(-45deg) translate(0, -1px);
        }

        #menu
        {
          position: absolute;
          width: 300px;
          margin: -100px 0 0 -50px;
          padding: 50px;
          padding-top: 125px;
          
          background: #ededed;
          list-style-type: none;
          -webkit-font-smoothing: antialiased;          
          transform-origin: 0% 0%;
          transform: translate(-100%, 0);
          transition: transform 0.5s cubic-bezier(0.77,0.2,0.05,1.0);
        }

        #menu li
        {
          padding: 10px 0;
          font-size: 22px;
        }
        #menuToggle input:checked ~ ul
        {
          transform: none;
        }
          body {
            background: aliceblue;
          }
    </style>
    <script src="/js/display_menu_of_item_type.js"></script>
  </head>
    <body onload="load_stars(<%= @menus.to_json%>)">
      <nav role="navigation">
        <div id="menuToggle">
          <input type="checkbox" />
          <span></span>
          <span></span>
          <span></span>
          <ul id="menu">
            <a href="<%=owner_dashboard_users_path%>"><li>Home</li></a>
            <a href="<%= new_menu_path %>"><li>Add Menu</li></a>
            <a href="<%= new_restaurant_detail_path %>"><li>Add Restaurant</li></a>
            <a href="#"><li>Sales analysis</li></a>
            <a href="<%= edit_restaurant_details_path%>"><li>Settings</li></a>
            <a href="<%= destroy_user_session_path%>"><li>Logout</li></a>
          </ul>
        </div>
      </nav>
      <button class="btn btn-info" style="margin-left:100px; margin-top:15px">Daily Revenue : <%= @today_analysis%></button>
      <button class="btn btn-info" style="margin-left:100px; margin-top:15px">Weekly Revenue : <%= @weekly_analysis%></button>
      <button class="btn btn-info" style="margin-left:100px; margin-top:15px">Monthly Revenue : <%= @monthly_analysis%> </button>
      <button class="btn btn-info" style="margin-left:100px; margin-top:15px">Yearly Revenue : <%= @yearly_analysis%></button>
      <br>
      <br>
      <% if RestaurantDetail.exists?(user_id:current_user.id)%>
        <div class="container">
        <div id="restaurant_background">
            <br>
            <h1 style="color:white; margin-left:700px; margin-top:100px; font-size: 3.5em;">
              <%= @restaurant.name %>...
            </h1>
            <p style="color:gray; margin-left:700px; margin-top:10px; font-size: 2.5em;">
              <%= @restaurant.description %>
            </p>
            <center>
            <p style="color:gray; margin-top:80px; margin-right:20px; font-size: 1.5em;" class="float-right">
              <%= City.find(@restaurant.city_id).name %>
            </p>
            </center>
          </div>
          </div>
          <div class="container">
            <table class="table table-hover">
              <thead class="thead-dark">
                <tr>
                  <th>Item Name</th>
                  <th>Price</th>
                  <th>Rating</th>
                  <th>Ordered by</th>
                </tr>
              </thead>
              <tbody>
                <% if @error_message %>
                  <tr>
                    <td class="text-center" colspan="4">
                      <p><%= @error_message[:errors] %></p>
                    </td>
                  </tr>
                <% else %>
                  <% @menus.each do |menu| %>
                    <tr>
                      <td><%= menu.item_name %></td>
                      <td><%= menu.price %>/-</td>
                      <td>
                        <span id="stars-<%= menu.id %>">Rating:</span>
                      </td>
                      <td>
                        (<%= OrderItem.where(menu_id:menu.id).count%>)
                      </td>
                        <br>
                      </td>
                    </tr>
                  <% end %>
                <% end %>
              </tbody>
            </table>
          </div>
      <% else %>
      <% end %>
      <br>
      <br>
      <%= render "application/footer" %>
	</body>
</html>
